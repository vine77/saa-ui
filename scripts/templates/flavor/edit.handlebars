<div class="modal-header">
  <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
  <h3>Edit Flavor</h3>
</div>
<form id="flavorsForm" {{action "editFlavor" on="submit"}}>
  <div class="modal-body modal-tall">
    <p>Edit flavor "{{model.name}}" and attached <abbr title="Service-Level Agreement">SLA</abbr>.</p>
    <div class="form-horizontal well-clean shadow-lifted">
      <div class="container-fluid">
        <div class="row-fluid">
          <div class="span5 separator-right">
            <div class="control-group">
              <label class="control-label">Flavor name:</label>
              <div class="controls">
                {{view Ember.TextField class="input-medium" valueBinding="model.name" autofocus="autofocus"}}
              </div>
            </div>
            <div class="control-group">
              <label class="control-label">vCPUs:</label>
              <div class="controls">
                {{view Ember.TextField class="input-small" valueBinding="model.vcpus"}}
              </div>
            </div>
            <div class="control-group">
              <label class="control-label">RAM:</label>
              <div class="controls">
                {{view Ember.TextField class="input-small" valueBinding="model.memory"}}
                MiB
              </div>
            </div>
            <div class="control-group">
              <label class="control-label">Root Disk:</label>
              <div class="controls">
                {{view Ember.TextField class="input-small" valueBinding="model.root"}}
                GiB
              </div>
            </div>
            <div class="control-group">
              <label class="control-label">Ephemeral Disk:</label>
              <div class="controls">
                {{view Ember.TextField class="input-small" valueBinding="model.ephemeral"}}
                GiB
              </div>
            </div>
            <div class="control-group">
              <label class="control-label">Swap Disk:</label>
              <div class="controls">
                {{view Ember.TextField class="input-small" valueBinding="model.swap"}}
                MiB
              </div>
            </div>
          </div>
          <div class="span7 separate">
            {{#if hasNewSla}}
              <div class="pull-right">
                {{view Ember.Select class="input-medium"
                  contentBinding="slaTypes"
                  valueBinding="slaType"
                  prompt="Select SLA Type:"
                  optionValuePath="content.value"
                  optionLabelPath="content.label"
                }}
              </div>
            {{/if}}
            <div class="nav control-group btn-group">
              <a {{bind-attr class=":btn hasNoSla:active"}} {{action "selectSlaType" undefined}}>No SLA</a>
              <a {{bind-attr class=":btn hasExistingSla:active"}} {{action "selectSlaType" "existing"}}>Existing SLA</a>
              <a {{bind-attr class=":btn hasNewSla:active"}} {{action "selectSlaType" "new"}}>New SLA</a>
            </div>
            {{#if hasNoSla}}
              <div class="alert">No SLA will be attached to this flavor.</div>
            {{/if}}
            {{#if hasExistingSla}}
              <div class="control-group">
                <label class="inline">SLA:</label>
                {{view Ember.Select viewName="select"
                  contentBinding="slas"
                  optionValuePath="content.id"
                  optionLabelPath="content.name"
                  selectionBinding="model.sla"
                }}
              </div>
              SLOs in "{{model.sla.name}}":
              <ol>
                {{#each slo in model.sla.slos}}
                  <li>{{slo.description}}</li>
                {{/each}}
              </ol>
            {{/if}}
            {{#if hasNewSla}}
              <p>
                <label class="inline">New SLA name:</label>
                {{view Ember.TextField valueBinding="model.sla.name" autofocus="autofocus"}}
                {{#if isAddSloAvailable}}
                  <a class="btn pull-right" {{action "addSlo"}}>
                    <i class="icon-plus-sign"></i> Add SLO
                  </a>
                {{else}}
                  <a {{bind-attr class="isAddSloAvailable::disabled :btn :pull-right"}}>
                    <i class="icon-plus-sign"></i> Add SLO
                  </a>
                {{/if}}
              </p>
              {{#each slo in model.sla.slos itemController="slo"}}
                <div class="slo-row separator-top">
                  {{view Ember.Select viewName="select" class="input-medium"
                    contentBinding="slo.possibleSloTemplates"
                    optionValuePath="content.id"
                    optionLabelPath="content.readableSloType"
                    selectionBinding="sloTemplate"
                    prompt="Select SLO:"
                  }}
                  {{#if sloTemplate}}
                    {{#if allowedOperatorsGreaterThanOne}}
                      {{view Ember.Select viewName="select" class="input-small"
                        contentBinding="slo.sloTemplate.allowedOperators"
                        valueBinding="slo.operator"
                      }}
                    {{else}}
                      {{slo.sloTemplate.allowedOperators}}
                    {{/if}}
                  {{/if}}
                  {{#if isBoolean}}
                    <label style="display:inline; margin-left:10px;">
                      {{view Ember.RadioButton name="value" selection=value value="1"}}
                      True
                    </label>
                    <label style="display:inline; margin-left:10px;">
                      {{view Ember.RadioButton name="value" selection=value value="0"}}
                      False
                    </label>
                  {{/if}}
                  {{#if isInteger}}
                    {{view Ember.TextField class="input-small" value=value}}
                  {{/if}}
                  {{#if isString}}
                    {{view Ember.TextField class="input-medium" value=value}}
                  {{/if}}
                  {{#if isRange}}
                    {{view Ember.TextField class="input-tiny" value=rangeMin}} to
                    {{view Ember.TextField class="input-tiny" value=rangeMax}}
                  {{/if}}

                  {{slo.sloTemplate.unit}}

                  {{#if slo.sloInfoExists}}
                    {{#view App.PopoverView title="SLO Information" dataTrigger="mixed"}}
                      <span class="help-tip"> <i class="icon-question-sign"></i> </span>
                      <span class="popover-content" style="display:none;">
                        {{#if slo.isComputeSloTable}}
                          <span class="table-flat-header"> Max SCUs per vCPU </span>
                          <div class="alert alert-info">
                            The below table tells you the state of the current cloud and the number of SCUs/cores that are available for nodes in the cloud. All nodes in the cloud meets the minimum value, half of the nodes meet the median value, and X meet the maximum value.
                          </div>
                          <table class="table">
                            <thead>
                              <th> </th>
                              <th>SCUs</th>
                              <th># of Nodes</th>
                            </thead>
                            <tbody>
                              <tr>
                                <td> Maximum </td>
                                <td> {{slo.sloVcpuTableMaximumScus}} </td>
                                <td> {{slo.sloVcpuTableNumberOfNodesMaximumScus}} </td>
                              </tr>
                              <tr>
                                <td> Median </td>
                                <td> {{slo.sloVcpuTableMedianScus}} </td>
                                <td> {{slo.sloVcpuTableNumberOfNodesMedianScus}} </td>
                              </tr>
                              <tr>
                                <td> Minimum </td>
                                <td> {{slo.sloVcpuTableMinimumScus}} </td>
                                <td> {{slo.sloVcpuTableNumberOfNodesMinimumScus}} </td>
                              </tr>
                            </tbody>
                          </table>
                        {{/if}}
                        {{#if slo.isExclusiveCoresSloTable}}
                          <span class="table-flat-header"> Max Exclusive Cores per VM </span>
                          <div class="alert alert-info">
                            The below table tells you the state of the current cloud and the number of SCUs/cores that are available for nodes in the cloud. All nodes in the cloud meets the minimum value, half of the nodes meet the median value, and X meet the maximum value.
                          </div>
                          <table class="table">
                            <thead>
                              <th> </th>
                              <th>Exclusive Cores</th>
                              <th># of Nodes</th>
                            </thead>
                            <tbody>
                              <tr>
                                <td> Maximum </td>
                                <td> {{slo.sloExclusiveCoresTableMaximum}} </td>
                                <td> {{slo.sloExclusiveCoresTableNumberOfNodesMaximum}} </td>
                              </tr>
                              <tr>
                                <td> Median </td>
                                <td> {{slo.sloExclusiveCoresTableMedian}} </td>
                                <td> {{slo.sloExclusiveCoresTableNumberOfNodesMedian}} </td>
                              </tr>
                              <tr>
                                <td> Minimum </td>
                                <td> {{slo.sloExclusiveCoresTableMinimum}} </td>
                                <td> {{slo.sloExclusiveCoresTableNumberOfNodesMinimum}} </td>
                              </tr>
                            </tbody>
                          </table>
                        {{/if}}
                        {{#if slo.isComputeVmSloTable}}
                          <span class="table-flat-header"> Max SCUs per VM </span>
                          <div class="alert alert-info">
                            The below table tells you the state of the current cloud and the number of SCUs/cores that are available for nodes in the cloud. All nodes in the cloud meets the minimum value, half of the nodes meet the median value, and X meet the maximum value.
                          </div>
                          <table class="table">
                            <thead>
                              <th> </th>
                              <th>SCUs</th>
                              <th># of Nodes</th>
                            </thead>
                            <tbody>
                              <tr>
                                <td> Maximum </td>
                                <td> {{slo.sloVmTableMaximumScus}} </td>
                                <td> {{slo.sloVmTableNumberOfNodesMaximumScus}} </td>
                              </tr>
                              <tr>
                                <td> Median </td>
                                <td> {{slo.sloVmTableMedianScus}} </td>
                                <td> {{slo.sloVmTableNumberOfNodesMedianScus}} </td>
                              </tr>
                              <tr>
                                <td> Minimum </td>
                                <td> {{slo.sloVmTableMinimumScus}} </td>
                                <td> {{slo.sloVmTableNumberOfNodesMinimumScus}} </td>
                              </tr>
                            </tbody>
                          </table>
                        {{/if}}
                      </span>
                    {{/view}}
                  {{/if}}

                  <a class="btn pull-right" {{action "deleteSlo" slo}}><i class="icon-remove-sign"></i></a>
                  <small class="block">{{slo.sloTemplate.description}}</small>
                </div>
              {{/each}}
            {{/if}}
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <a class="btn" data-dismiss="modal">Cancel</a>
    {{#if isFlavorCreating}}
      <a class="btn btn-primary" disabled>Save</a>
    {{else}}
      <input class="btn btn-primary" type="submit" value="Save">
    {{/if}}
  </div>
</form>
